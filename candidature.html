<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Candidature Waitlist - LS Midnight</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>

<header class="nav">
  <div class="container">
    <div class="nav-inner">
      <a class="brand" href="index.html">
        <img src="images/logo.png" alt="Logo" class="logo-img">
        <div>
          <div class="brand-title">LS Midnight : Roleplay</div>
          <div class="brand-sub">Candidature Waitlist</div>
        </div>
      </a>

      <nav class="links">
        <a class="link" href="index.html">Accueil</a>
      </nav>

      <a class="btn btn-red" target="_blank" href="https://discord.gg/ctzPkVGn5K">Discord</a>
    </div>
  </div>
</header>

<main class="main">
  <div class="container">
    <h1>üìù Candidature RP Waitlist</h1>

    <div class="card" style="margin-top:16px;">
      <form id="form">

        <div class="row">
          <div>
            <label class="small">Pseudo Discord</label>
            <input class="input" name="discord" required>
          </div>
          <div>
            <label class="small">√Çge</label>
            <input class="input" type="number" name="age" required>
          </div>
        </div>

        <div class="row" style="margin-top:12px;">
          <div>
            <label class="small">Nom RP</label>
            <input class="input" name="nomrp" required>
          </div>
          <div>
            <label class="small">Exp√©rience RP</label>
            <select class="select" name="xp" required>
              <option value="">Choisir</option>
              <option>D√©butant</option>
              <option>Interm√©diaire</option>
              <option>Confirm√©</option>
            </select>
          </div>
        </div>

        <div style="margin-top:12px;">
          <label class="small">Motivation</label>
          <textarea class="textarea" name="motivation" required></textarea>
        </div>

        <div style="margin-top:12px;">
          <label class="small">Background RP</label>
          <textarea class="textarea" name="background" required></textarea>
        </div>

        <div style="margin-top:14px;">
          <button class="btn btn-red" type="submit">Envoyer</button>
        </div>

        <div id="msg" class="small" style="margin-top:10px;"></div>

      </form>
    </div>
  </div>
</main>

<footer class="footer">
  <div class="container">
    ¬© 2026 LS Midnight : Roleplay
  </div>
</footer>

<script>
const WEBHOOK_URL = "https://discord.com/api/webhooks/1477320308351439001/mvklhBTHHPBnHnZZOEBmnFir6kFLJncOwI6OdZ8muVysyZdNs6XQtVF90mvPJmFWSRs6";

document.getElementById("form").addEventListener("submit", async function(e){
  e.preventDefault();

  const msg = document.getElementById("msg");
  msg.textContent = "‚è≥ Envoi en cours...";

  const data = new FormData(this);

  const payload = {
    username: "LS Midnight ‚Ä¢ Waitlist",
    embeds: [{
      title: "üìù Nouvelle Candidature RP Waitlist",
      color: 14423100,
      fields: [
        { name: "Discord", value: data.get("discord") },
        { name: "√Çge", value: data.get("age") },
        { name: "Nom RP", value: data.get("nomrp") },
        { name: "XP", value: data.get("xp") },
        { name: "Motivation", value: data.get("motivation").slice(0,1024) },
        { name: "Background", value: data.get("background").slice(0,1024) }
      ],
      timestamp: new Date().toISOString()
    }]
  };

  try{
    const res = await fetch(WEBHOOK_URL,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify(payload)
    });

    if(!res.ok) throw new Error();

    msg.textContent = "‚úÖ Candidature envoy√©e !";
    this.reset();
  }catch{
    msg.textContent = "‚ùå Erreur envoi webhook.";
  }
});
</script>

</body>
</html>
